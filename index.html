<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form Pengambilan Barang</title>

<style>
body {
  font-family: Arial, sans-serif;
  max-width: 500px;
  margin: auto;
  padding: 15px;
}
label {
  font-weight: bold;
}
input, select, button {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  margin-bottom: 15px;
}
button {
  background: #0d6efd;
  color: white;
  border: none;
  border-radius: 4px;
}
button:active {
  background: #084298;
}
</style>
</head>

<body>

<h3>Form Pengambilan Barang</h3>

<label>Email</label>
<input type="email" id="email" placeholder="email@contoh.com" required>

<label>Unit</label>
<select id="unit" required></select>

<label>Nama Pengambil</label>
<input type="text" id="nama" required>

<label>Tanggal</label>
<input type="date" id="tanggal" required>

<label>Nama Item</label>
<input list="itemList" id="item" placeholder="Cari nama item..." required>
<datalist id="itemList"></datalist>

<label>Jumlah</label>
<input type="number" id="qty" min="1" required>

<button onclick="kirim()">Kirim</button>

<script>
const API_URL = "PASTE_API_URL_KAMU_DI_SINI";

/* LOAD DATA */
fetch(API_URL)
  .then(res => res.json())
  .then(data => {

    // UNIT
    data.units.forEach(u => {
      const opt = document.createElement("option");
      opt.value = u;
      opt.textContent = u;
      unit.appendChild(opt);
    });

    // ITEM
    data.items.forEach(i => {
      const opt = document.createElement("option");
      opt.value = i;
      itemList.appendChild(opt);
    });
  });

function kirim() {

  if (!email.value || !unit.value || !nama.value || !item.value || !qty.value) {
    alert("Lengkapi semua data");
    return;
  }

  fetch(API_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      email: email.value,
      unit: unit.value,
      nama: nama.value,
      tanggal: tanggal.value,
      jenis: "Barang Keluar",
      items: [
        { nama: item.value, qty: qty.value }
      ]
    })
  })
  .then(res => res.text())
  .then(msg => {
    alert(msg);
    if (msg === "SUCCESS") {
      item.value = "";
      qty.value = "";
    }
  });
}
</script>

</body>
</html>
